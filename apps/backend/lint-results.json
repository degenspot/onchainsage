[{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/admin.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/admin.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/audit-log/audit-log.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/audit-log/audit-log.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/providers/admin.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/admin/providers/moderation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/analytics.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/analytics.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/analytics.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/dto/analytics-summary.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/dto/daily-analytics.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/entities/analytics-summary.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/entities/daily-analytics.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/entities/smart-contract-event.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/analytics/event-indexer.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/app.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/app.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/app.module.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Delete `⏎`","line":35,"column":1,"nodeType":null,"messageId":"delete","endLine":36,"endColumn":1,"fix":{"range":[1911,1912],"text":""},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎····`","line":90,"column":16,"nodeType":null,"messageId":"insert","endLine":90,"endColumn":16,"fix":{"range":[3364,3364],"text":"\n    "},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `⏎······.apply(RateLimitMiddleware)⏎······` with `.apply(RateLimitMiddleware)`","line":97,"column":13,"nodeType":null,"messageId":"replace","endLine":99,"endColumn":7,"fix":{"range":[3589,3630],"text":".apply(RateLimitMiddleware)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `⏎`","line":106,"column":1,"nodeType":null,"messageId":"delete","endLine":107,"endColumn":1,"fix":{"range":[3753,3754],"text":""},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/app.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/auth.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/auth.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/auth.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/auth.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/auth.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/decorators/roles.decorator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/dto/auth.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/entities/auth.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/guards/admin.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/guards/jwt-auth.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/guards/roles.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/guards/wallet-auth-guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/auth/strategies/jwt.strategy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/decorators/rate-limit.decorator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/decorators/roles.decorator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/filters/http-exception.filter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/guards/api-key.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/guards/roles.guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/interceptors/http-logging.interceptor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/common/middleware/rate-limit.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/app.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/database.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/feature-flag.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/feature-flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/starknet.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/config/throttler.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/content/entities/content.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/data-source.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/digest.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/digest.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/digest.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/dto/create-digest.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/dto/update-digest-preference.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/entities/digest-log.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/digest/entities/user-digest-preference.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/entities/rate-limit-violation.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/controllers/export.controller.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportDto' is defined but never used.","line":177,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":177,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportDto' is defined but never used.","line":186,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":186,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportDto' is defined but never used.","line":195,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":195,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/dto/export-data.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/dto/export-query.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/entities/export-history.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/export.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/export/services/export.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/feature-flags/feature-flags.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/dto/create-forum-report.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/dto/update-forum-report.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/entities/forum-report.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/forum-report.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/forum-report.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/forum-report.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/forum-report.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum-report/forum-report.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum/forum.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum/forum.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/dto/create-reply.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/dto/create-thread.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/dto/report-post.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/entities/post.entity.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `thread` with `(thread)`","line":20,"column":28,"nodeType":null,"messageId":"replace","endLine":20,"endColumn":34,"fix":{"range":[470,476],"text":"(thread)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `reply` with `(reply)`","line":35,"column":27,"nodeType":null,"messageId":"replace","endLine":35,"endColumn":32,"fix":{"range":[751,756],"text":"(reply)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `report` with `(report)`","line":38,"column":28,"nodeType":null,"messageId":"replace","endLine":38,"endColumn":34,"fix":{"range":[839,845],"text":"(report)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `reaction` with `(reaction)`","line":41,"column":30,"nodeType":null,"messageId":"replace","endLine":41,"endColumn":38,"fix":{"range":[932,940],"text":"(reaction)"},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/entities/reaction.entity.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `post·=>·post.reactions,·{·nullable:·true,·onDelete:·'CASCADE'` with `(post)·=>·post.reactions,·{⏎····nullable:·true,⏎····onDelete:·'CASCADE',⏎·`","line":17,"column":26,"nodeType":null,"messageId":"replace","endLine":17,"endColumn":87,"fix":{"range":[428,489],"text":"(post) => post.reactions, {\n    nullable: true,\n    onDelete: 'CASCADE',\n "},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `reply·=>·reply.reactions,·{·nullable:·true,·onDelete:·'CASCADE'` with `(reply)·=>·reply.reactions,·{⏎····nullable:·true,⏎····onDelete:·'CASCADE',⏎·`","line":20,"column":27,"nodeType":null,"messageId":"replace","endLine":20,"endColumn":90,"fix":{"range":[534,597],"text":"(reply) => reply.reactions, {\n    nullable: true,\n    onDelete: 'CASCADE',\n "},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/entities/reply.entity.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `post` with `(post)`","line":19,"column":26,"nodeType":null,"messageId":"replace","endLine":19,"endColumn":30,"fix":{"range":[425,429],"text":"(post)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `report` with `(report)`","line":34,"column":28,"nodeType":null,"messageId":"replace","endLine":34,"endColumn":34,"fix":{"range":[701,707],"text":"(report)"},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `reaction` with `(reaction)`","line":37,"column":30,"nodeType":null,"messageId":"replace","endLine":37,"endColumn":38,"fix":{"range":[795,803],"text":"(reaction)"},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/entities/report.entity.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `post·=>·post.reports,·{·nullable:·true,·onDelete:·'CASCADE'` with `(post)·=>·post.reports,·{⏎····nullable:·true,⏎····onDelete:·'CASCADE',⏎·`","line":12,"column":26,"nodeType":null,"messageId":"replace","endLine":12,"endColumn":85,"fix":{"range":[356,415],"text":"(post) => post.reports, {\n    nullable: true,\n    onDelete: 'CASCADE',\n "},"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"prettier/prettier","severity":2,"message":"Replace `reply·=>·reply.reports,·{·nullable:·true,·onDelete:·'CASCADE'` with `(reply)·=>·reply.reports,·{⏎····nullable:·true,⏎····onDelete:·'CASCADE',⏎·`","line":15,"column":27,"nodeType":null,"messageId":"replace","endLine":15,"endColumn":88,"fix":{"range":[460,521],"text":"(reply) => reply.reports, {\n    nullable: true,\n    onDelete: 'CASCADE',\n "},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/entities/thread.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/forum.controller.spec.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Delete `·`","line":20,"column":38,"nodeType":null,"messageId":"delete","endLine":20,"endColumn":39,"fix":{"range":[678,679],"text":""},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/forum.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/forum.module.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `⏎····TypeOrmModule.forFeature([Thread,·Post,·Reply,·Report,·Reaction]),⏎··` with `TypeOrmModule.forFeature([Thread,·Post,·Reply,·Report,·Reaction])`","line":14,"column":13,"nodeType":null,"messageId":"replace","endLine":16,"endColumn":3,"fix":{"range":[578,652],"text":"TypeOrmModule.forFeature([Thread, Post, Reply, Report, Reaction])"},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/forum.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/forum.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/guards/admin.guard.ts","messages":[],"suppressedMessages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `·CanActivate,·ExecutionContext,·Injectable,·ForbiddenException·` with `⏎··CanActivate,⏎··ExecutionContext,⏎··Injectable,⏎··ForbiddenException,⏎`","line":2,"column":9,"nodeType":null,"messageId":"replace","endLine":2,"endColumn":72,"fix":{"range":[47,110],"text":"\n  CanActivate,\n  ExecutionContext,\n  Injectable,\n  ForbiddenException,\n"},"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/forum_module/spam-filter/spam-filter.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/gateways/gateway.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/gateways/signal.gateway.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'client' is defined but never used.","line":45,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'payload' is defined but never used.","line":45,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/health/health.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/health/health.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/health/health.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/mail/mail.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/mail/mail.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'text' is defined but never used.","line":7,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'html' is defined but never used.","line":7,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":65,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/mail/providers/mail.provider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/main.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/feature-flag.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/logger.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/rate-limit.middleware.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/rate-limit.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/starknet-auth.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/middleware/stats.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/migrations/1711384400000-AddHistoricalPerformance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/dto/create-news.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/dto/update-news.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/entities/news.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/news.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/news.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/news.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/news.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/news.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":78,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":78,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/news/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/admin-notification.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/admin-notification.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/notification-preference.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/notification-template.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/notification.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/controllers/webhook.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/create-notification-template.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/create-notification.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/create-template.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/create-webhook.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/notification-preference.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/pagination.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/update-notification.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/update-template.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/dto/update-webhook.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/delivery-record.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/notification-preference.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/notification-template.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/notification.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/user-notificationsetting.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/entities/webhook-registration.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/notification.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/providers/email-notification.provider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/providers/in-app-notification.provider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/providers/notification.provider.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/providers/push-notification.provider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/providers/trading-signalservice.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/delivery-tracking.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/event-notification.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/event-notification.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"output":"import { Injectable, Logger } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { EventEmitter2, OnEvent } from '@nestjs/event-emitter';\nimport { NotificationPreferenceService } from './notification-preference.service';\nimport { NotificationService } from './notification.service';\nimport { WebhookService } from './webhook.service';\nimport { EventType } from 'src/analytics/entities/smart-contract-event.entity';\nimport { NotificationPreference } from '../entities/notification-preference.entity';\nimport { NotificationChannel } from '../entities/notification.entity';\nimport { User } from 'src/users/entities/user.entity';\nimport { Redis } from 'ioredis';\nimport { InjectRedis } from '@nestjs-modules/ioredis';\n\n@Injectable()\nexport class EventNotificationService {\n  private readonly logger = new Logger(EventNotificationService.name);\n  private readonly rateLimiters = new Map<\n    string,\n    { lastExecution: number; currentCount: number }\n  >();\n\n  constructor(\n    @InjectRepository(NotificationPreference)\n    private preferenceRepository: Repository<NotificationPreference>,\n    private preferenceService: NotificationPreferenceService,\n    private notificationService: NotificationService,\n    private webhookService: WebhookService,\n    private eventEmitter: EventEmitter2,\n    @InjectRedis() private readonly redis: Redis,\n  ) {}\n\n  @OnEvent('onchain.event')\n  async handleOnChainEvent(event: {\n    eventType: EventType;\n    eventData: any;\n    timestamp: Date;\n  }) {\n    try {\n      // Get users who want to be notified about this event\n      const userIds = await this.preferenceService.getUsersToNotify(\n        event.eventType,\n      );\n\n      for (const userId of userIds) {\n        const preference = await this.preferenceRepository.findOne({\n          where: { userId, eventType: event.eventType },\n        });\n\n        if (!preference || !preference.enabled) continue;\n\n        // Process each enabled channel\n        for (const channel of preference.channels) {\n          if (\n            channel === NotificationChannel.EMAIL &&\n            preference.emailAddress\n          ) {\n            await this.handleEmailNotification(userId, preference, event);\n          } else if (\n            channel === NotificationChannel.WEBHOOK &&\n            preference.webhookUrl\n          ) {\n            await this.handleWebhookNotification(userId, preference, event);\n          } else if (channel === NotificationChannel.IN_APP) {\n            await this.handleInAppNotification(userId, preference, event);\n          }\n        }\n      }\n    } catch (error) {\n      this.logger.error(\n        `Error handling on-chain event: ${error.message}`,\n        error.stack,\n      );\n    }\n  }\n\n  private async handleEmailNotification(\n    userId: string,\n    preference: NotificationPreference,\n    event: { eventType: EventType; eventData: any; timestamp: Date },\n  ) {\n    const rateLimitKey = `email:${userId}:${event.eventType}`;\n    if (!(await this.checkRateLimit(rateLimitKey, 10, 3600))) {\n      // 10 per hour\n      this.logger.warn(\n        `Email rate limit exceeded for user ${userId} and event ${event.eventType}`,\n      );\n      return;\n    }\n\n    const title = `On-chain Event: ${event.eventType}`;\n    const content = this.formatEventContent(event);\n\n    await this.notificationService.create({\n      userId,\n      title,\n      content,\n      channels: [NotificationChannel.EMAIL],\n      metadata: {\n        eventType: event.eventType,\n        eventData: event.eventData,\n      },\n    });\n  }\n\n  private async handleWebhookNotification(\n    userId: string,\n    preference: NotificationPreference,\n    event: { eventType: EventType; eventData: any; timestamp: Date },\n  ) {\n    const rateLimitKey = `webhook:${userId}:${event.eventType}`;\n    if (!(await this.checkRateLimit(rateLimitKey, 5, 60))) {\n      // 5 per minute\n      this.logger.warn(\n        `Webhook rate limit exceeded for user ${userId} and event ${event.eventType}`,\n      );\n      return;\n    }\n\n    const payload = {\n      event: event.eventType,\n      data: event.eventData,\n      timestamp: event.timestamp,\n    };\n\n    // Construct a partial WebhookRegistration object to satisfy the method signature\n    const mockWebhook: any = {\n      url: preference.webhookUrl,\n      configuration: preference.webhookConfig || {},\n      method: 'POST', // Assuming POST, as it's the default in deliverEvent\n    };\n\n    await this.webhookService.deliverEvent(\n      mockWebhook,\n      event.eventType,\n      payload,\n    );\n  }\n\n  private async handleInAppNotification(\n    userId: string,\n    preference: NotificationPreference,\n    event: { eventType: EventType; eventData: any; timestamp: Date },\n  ) {\n    const title = `On-chain Event: ${event.eventType}`;\n    const content = this.formatEventContent(event);\n\n    await this.notificationService.create({\n      userId,\n      title,\n      content,\n      channels: [NotificationChannel.IN_APP],\n      metadata: {\n        eventType: event.eventType,\n        eventData: event.eventData,\n      },\n    });\n  }\n\n  private async checkRateLimit(\n    key: string,\n    maxCount: number,\n    windowSeconds: number,\n  ): Promise<boolean> {\n    const currentTime = Math.floor(Date.now() / 1000);\n    const windowStart = currentTime - windowSeconds;\n\n    // Get all timestamps within the window\n    const timestamps = await this.redis.lrange(key, 0, -1);\n    const validTimestamps = timestamps\n      .map(Number)\n      .filter((timestamp) => timestamp > windowStart);\n\n    // If we're at the limit, return false\n    if (validTimestamps.length >= maxCount) {\n      return false;\n    }\n\n    // Add current timestamp and trim old ones\n    await this.redis.lpush(key, currentTime);\n    await this.redis.ltrim(key, 0, maxCount - 1);\n    await this.redis.expire(key, windowSeconds);\n\n    return true;\n  }\n\n  private formatEventContent(event: {\n    eventType: EventType;\n    eventData: any;\n    timestamp: Date;\n  }): string {\n    switch (event.eventType) {\n      case EventType.SIGNAL_REGISTERED:\n        return `New signal registered: ${event.eventData.signalId}`;\n      case EventType.VOTE_RESOLVED:\n        return `Vote resolved: ${event.eventData.voteId} - Result: ${event.eventData.result}`;\n      case EventType.REPUTATION_CHANGED:\n        return `Reputation changed: ${event.eventData.userId} - New value: ${event.eventData.newValue}`;\n      case EventType.STAKE:\n        return `Stake added: ${event.eventData.amount}`;\n      case EventType.UNSTAKE:\n        return `Stake removed: ${event.eventData.amount}`;\n      case EventType.REWARD_CLAIMED:\n        return `Reward claimed: ${event.eventData.amount}`;\n      case EventType.SIGNAL_EXPIRED:\n        return `Signal expired: ${event.eventData.signalId}`;\n      case EventType.SIGNAL_FLAGGED:\n        return `Signal flagged: ${event.eventData.signalId} - Reason: ${event.eventData.reason}`;\n      default:\n        return `Event occurred: ${event.eventType}`;\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification-admin.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification-preference.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification-preference.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification-queue.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification-template.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification.service.spec.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_template' is defined but never used.","line":13,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_data' is defined but never used.","line":13,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":45,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/notification.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/services/webhook.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'webhook' is assigned a value but never used.","line":207,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":207,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/notification/websocket/websocket.getway.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/dto/payment.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/entities/payment-limit.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/entities/payment-transaction.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/entities/scheduled-payment.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/entities/webhook-config.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/payment.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/payment.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/payment/payment.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/redis/redis.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/redis/redis.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/redis/redis.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_userId' is defined but never used.","line":123,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Injectable } from '@nestjs/common';\nimport Redis from 'ioredis';\nimport { ConfigService } from '@nestjs/config';\nimport { Preferences } from './types';\n\n@Injectable()\nexport class RedisService {\n  private readonly redis: Redis;\n\n  constructor(private configService: ConfigService) {\n    this.redis = new Redis({\n      host: this.configService.get('REDIS_HOST') || 'localhost',\n      port: this.configService.get('REDIS_PORT') || 6379,\n    });\n  }\n\n  async getAsync(key: string): Promise<string | null> {\n    return this.redis.get(key);\n  }\n\n  async setAsync(key: string, value: string, ttl?: number): Promise<void> {\n    if (ttl) {\n      await this.redis.setex(key, ttl, value);\n    } else {\n      await this.redis.set(key, value);\n    }\n  }\n\n  async del(key: string): Promise<void> {\n    await this.redis.del(key);\n  }\n\n  async increment(key: string): Promise<number> {\n    return this.redis.incr(key);\n  }\n\n  // fn to SET user preference\n  public async setUserPreferences(userId: string, preferences: Preferences) {\n    const key = `appName:user:${userId}:preferences`;\n    const ttl = +this.configService.get('REDIS_TTL') || 3600;\n    await this.setAsync(key, JSON.stringify(preferences), ttl);\n    console.log(`User ${userId} preferences cached`);\n  }\n\n  // fn to GET user preference\n  public async getUserPreferences(userId: string): Promise<Preferences | null> {\n    const key = `appName:user:${userId}:preferences`;\n    const cachedPreferences = await this.getAsync(key);\n    if (cachedPreferences) {\n      console.log(`Fetching preferences for user ${userId} from cache`);\n      return JSON.parse(cachedPreferences);\n    }\n    return null;\n  }\n\n  // fn to DELETE user preference\n  public async deleteUserPreferences(userId: string) {\n    const key = `appName:user:${userId}:preferences`;\n    await this.del(key);\n    console.log(`User ${userId} preferences removed from cache`);\n  }\n\n  // BATCH OPERATION: set multiple user preferences\n  public async setMultipleUserPreferences(\n    preferences: Record<string, Preferences>,\n  ) {\n    const pipeline = this.redis.pipeline();\n    const ttl = +this.configService.get('REDIS_TTL') || 3600;\n\n    for (const [userId, userPreferences] of Object.entries(preferences)) {\n      const key = `appName:user:${userId}:preferences`;\n      pipeline.setex(key, ttl, JSON.stringify(userPreferences));\n    }\n\n    await pipeline.exec();\n    console.log('Batch user preferences cached');\n  }\n\n  // BATCH OPERATION: get multiple user preferences\n  public async getMultipleUserPreferences(\n    userIds: string[],\n  ): Promise<Record<string, Preferences | null>> {\n    const pipeline = this.redis.pipeline();\n\n    userIds.forEach((userId) => {\n      const key = `appName:user:${userId}:preferences`;\n      pipeline.get(key);\n    });\n\n    const results = await pipeline.exec();\n    const preferences: Record<string, Preferences | null> = {};\n\n    userIds.forEach((userId, index) => {\n      const value = results[index][1] as string | null;\n      preferences[userId] = value ? JSON.parse(value) : null;\n    });\n\n    console.log('Batch user preferences fetched');\n    return preferences;\n  }\n\n  // CACHE WARMING STRATEGY\n  public async warmUpCache() {\n    console.log('Warming up cache...');\n    const commonUserIds = ['user1', 'user2', 'user3'];\n\n    for (const userId of commonUserIds) {\n      const key = `appName:user:${userId}:preferences`;\n      const existing = await this.getAsync(key);\n      if (!existing) {\n        console.log(`Preloading preferences for user ${userId}`);\n        const preferences = await this.fetchPreferencesFromDatabase(userId);\n        if (preferences) {\n          const ttl = +this.configService.get('REDIS_TTL') || 3600;\n          await this.setAsync(key, JSON.stringify(preferences), ttl);\n        }\n      }\n    }\n  }\n\n  // Mock function to simulate fetching preferences from DB\n  private async fetchPreferencesFromDatabase(\n    _userId: string,\n  ): Promise<Preferences | null> {\n    return {\n      theme: 'dark',\n      notifications: true,\n      language: 'en',\n    };\n  }\n\n  // CACHE INVALIDATION\n  public async invalidateUserPreferences(userId: string) {\n    const key = `appName:user:${userId}:preferences`;\n    await this.del(key);\n    console.log(`Cache invalidated for user ${userId}`);\n  }\n\n  public async updateUserPreferences(userId: string, preferences: Preferences) {\n    await this.setUserPreferences(userId, preferences);\n    await this.invalidateUserPreferences(userId);\n  }\n\n  // Utility: Get all keys matching a pattern\n  public async keys(pattern: string): Promise<string[]> {\n    return this.redis.keys(pattern);\n  }\n\n  async get(key: string): Promise<string | null> {\n    return this.getAsync(key);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/redis/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/dto/create-profile.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/dto/create-reputation.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/dto/leader-board-item.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/dto/stake-history.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/dto/update-reputation.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/entities/reputation-adjustment.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/entities/reputation.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/entities/vote.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/reputation.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/reputation.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/reputation.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/reputation.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/reputation/reputation.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/dto/createSignalAuditDto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/provider/signal-audit.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/provider/signal-audit.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/signal-audit.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/signal-audit.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/signal-audit.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-audit/signalAudit.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-gateway/providers/signal-gateway.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal-gateway/signal-gateway.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signal/entities/signal-history.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/dtos/top-signals.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/entities/signal.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/interfaces/pagination.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/interfaces/ranking.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/interfaces/trading-signal.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/mock-signals.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/mock-signals.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/signals.controller.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/signals.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/signals.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/signals.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/signals.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/signals/test/top-signals.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/controllers/engagement-analytics.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/controllers/engagement-reporting.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/dto/create-engagement.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/dto/engagement-query.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/dto/engagement-report.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/entities/engagement.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/interfaces/engagement-analytics.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/interfaces/weighted-score.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/repositories/engagement.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/services/engagement-analytics.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/services/engagement-reporting.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_reportDto' is defined but never used.","line":231,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":231,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/engagement-analytics/services/engagement-reporting.service.ts\nimport { Injectable, Logger } from '@nestjs/common';\nimport { EngagementAnalyticsService } from './engagement-analytics.service';\nimport {\n  EngagementReportDto,\n  ReportFormat,\n  ReportType,\n} from '../dto/engagement-report.dto';\nimport { EngagementQueryDto, TimeFrame } from '../dto/engagement-query.dto';\nimport { EngagementSummary } from '../interfaces/engagement-analytics.interface';\nimport { SchedulerRegistry } from '@nestjs/schedule';\nimport { CronJob } from 'cron';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { createObjectCsvStringifier } from 'csv-writer';\n\n@Injectable()\nexport class EngagementReportingService {\n  private readonly logger = new Logger(EngagementReportingService.name);\n  private readonly reportsDir = path.join(process.cwd(), 'reports');\n\n  constructor(\n    private readonly analyticsService: EngagementAnalyticsService,\n    private readonly schedulerRegistry: SchedulerRegistry,\n  ) {\n    // Ensure reports directory exists\n    if (!fs.existsSync(this.reportsDir)) {\n      fs.mkdirSync(this.reportsDir, { recursive: true });\n    }\n\n    // Set up scheduled reports\n    this.setupScheduledReports();\n  }\n\n  /**\n   * Generate a report based on the provided parameters\n   */\n  async generateReport(\n    reportDto: EngagementReportDto,\n  ): Promise<string | Buffer> {\n    const { type, startDate, endDate, format } = reportDto;\n\n    // Create a query DTO for the analytics service\n    const queryDto: EngagementQueryDto = {\n      timeFrame: this.getTimeFrameFromReportType(type),\n      startDate,\n      endDate,\n    };\n\n    // Get the analytics data\n    const analyticsData =\n      await this.analyticsService.getEngagementAnalytics(queryDto);\n\n    // Format the data according to the requested format\n    return this.formatReport(analyticsData, format, reportDto.title);\n  }\n\n  /**\n   * Schedule the generation and delivery of periodic reports\n   */\n  private setupScheduledReports(): void {\n    // Daily report at midnight\n    const dailyJob = new CronJob('0 0 * * *', () => {\n      this.logger.log('Generating daily engagement report');\n      this.generateAndDeliverScheduledReport(ReportType.DAILY);\n    });\n\n    // Weekly report on Mondays at 1am\n    const weeklyJob = new CronJob('0 1 * * 1', () => {\n      this.logger.log('Generating weekly engagement report');\n      this.generateAndDeliverScheduledReport(ReportType.WEEKLY);\n    });\n\n    // Monthly report on the 1st of each month at 2am\n    const monthlyJob = new CronJob('0 2 1 * *', () => {\n      this.logger.log('Generating monthly engagement report');\n      this.generateAndDeliverScheduledReport(ReportType.MONTHLY);\n    });\n\n    // Register the cron jobs\n    this.schedulerRegistry.addCronJob('dailyEngagementReport', dailyJob);\n    this.schedulerRegistry.addCronJob('weeklyEngagementReport', weeklyJob);\n    this.schedulerRegistry.addCronJob('monthlyEngagementReport', monthlyJob);\n\n    // Start the jobs\n    dailyJob.start();\n    weeklyJob.start();\n    monthlyJob.start();\n  }\n\n  /**\n   * Generate and deliver a scheduled report\n   */\n  private async generateAndDeliverScheduledReport(\n    reportType: ReportType,\n  ): Promise<void> {\n    try {\n      const reportDto: EngagementReportDto = {\n        type: reportType,\n        format: ReportFormat.PDF,\n        title: `${reportType.charAt(0).toUpperCase() + reportType.slice(1)} Engagement Report`,\n      };\n\n      const report = await this.generateReport(reportDto);\n\n      // Save the report to the file system\n      const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n      const filename = `${reportDto.type}_report_${timestamp}.${this.getFileExtension(reportDto.format)}`;\n      const filepath = path.join(this.reportsDir, filename);\n\n      fs.writeFileSync(filepath, report);\n\n      this.logger.log(`Report saved to ${filepath}`);\n\n      // In a production environment, you would also send the report via email or upload to storage\n      await this.deliverReport(filepath, reportDto);\n    } catch (error) {\n      this.logger.error(\n        `Failed to generate scheduled report: ${error.message}`,\n        error.stack,\n      );\n    }\n  }\n\n  /**\n   * Format the report data according to the requested format\n   */\n  private formatReport(\n    data: EngagementSummary,\n    format: ReportFormat,\n    title?: string,\n  ): string | Buffer {\n    switch (format) {\n      case ReportFormat.JSON:\n        return JSON.stringify(data, null, 2);\n\n      case ReportFormat.CSV:\n        return this.formatCsvReport(data);\n\n      case ReportFormat.PDF:\n        return this.formatPdfReport(data, title);\n\n      default:\n        return JSON.stringify(data);\n    }\n  }\n\n  /**\n   * Format the report as CSV\n   */\n  private formatCsvReport(data: EngagementSummary): string {\n    // Format time series data for CSV\n    const records = data.trendData.flatMap((point) => {\n      return point.engagements.map((engagement) => ({\n        timestamp: point.timestamp.toISOString(),\n        type: engagement.type,\n        count: engagement.count,\n        weightedScore: engagement.weightedScore,\n      }));\n    });\n\n    // Create CSV stringifier\n    const csvStringifier = createObjectCsvStringifier({\n      header: [\n        { id: 'timestamp', title: 'Timestamp' },\n        { id: 'type', title: 'Engagement Type' },\n        { id: 'count', title: 'Count' },\n        { id: 'weightedScore', title: 'Weighted Score' },\n      ],\n    });\n\n    // Generate CSV\n    const header = csvStringifier.getHeaderString();\n    const rows = csvStringifier.stringifyRecords(records);\n\n    return header + rows;\n  }\n\n  /**\n   * Format the report as PDF\n   * In a production environment, this would use a PDF generation library like PDFKit\n   */\n  private formatPdfReport(data: EngagementSummary, title?: string): Buffer {\n    // This is a placeholder. In a real implementation, you would use a PDF library\n    // For now, we'll return a JSON string as a buffer for demonstration purposes\n    const reportTitle = title || 'Engagement Analytics Report';\n    const jsonData = JSON.stringify(\n      {\n        title: reportTitle,\n        generatedAt: new Date().toISOString(),\n        period: {\n          start: data.period.start.toISOString(),\n          end: data.period.end.toISOString(),\n        },\n        summary: {\n          totalEngagements: data.totalEngagements,\n          sentimentScore: data.sentimentScore,\n          engagementsByType: data.engagementsByType,\n        },\n        // Include other data as needed\n      },\n      null,\n      2,\n    );\n\n    return Buffer.from(jsonData);\n  }\n\n  /**\n   * Get the file extension based on report format\n   */\n  private getFileExtension(format: ReportFormat): string {\n    switch (format) {\n      case ReportFormat.JSON:\n        return 'json';\n      case ReportFormat.CSV:\n        return 'csv';\n      case ReportFormat.PDF:\n        return 'pdf';\n      default:\n        return 'txt';\n    }\n  }\n\n  /**\n   * Deliver the report to configured destinations (email, cloud storage, etc.)\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private async deliverReport(\n    filepath: string,\n    _reportDto: EngagementReportDto,\n  ): Promise<void> {\n    this.logger.log(`Report delivered: ${filepath}`);\n    // Placeholder for actual delivery logic (e.g., email service, S3 upload)\n  }\n\n  /**\n   * Get list of available generated reports\n   */\n  async getAvailableReports(): Promise<string[]> {\n    try {\n      // Read the report directory\n      const files = fs.readdirSync(this.reportsDir);\n\n      // Return only report files\n      return files.filter(\n        (file) =>\n          file.endsWith('.json') ||\n          file.endsWith('.csv') ||\n          file.endsWith('.pdf'),\n      );\n    } catch (error) {\n      this.logger.error(`Failed to read reports directory: ${error.message}`);\n      return [];\n    }\n  }\n\n  private getTimeFrameFromReportType(reportType: ReportType): TimeFrame {\n    switch (reportType) {\n      case ReportType.DAILY:\n        return TimeFrame.DAY;\n      case ReportType.WEEKLY:\n        return TimeFrame.WEEK;\n      case ReportType.MONTHLY:\n        return TimeFrame.MONTH;\n      default:\n        return TimeFrame.CUSTOM;\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/enagagemanet-analytics/services/reputation-weighting.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/shared/cache/engagement-cache.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-analytics/shared/utils/anomaly-detection.util.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EngagementSummary' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/engagement-analytics/shared/utils/anomaly-detection.util.ts\nimport { Injectable } from '@nestjs/common';\nimport {\n  EngagementAnomaly,\n  EngagementSummary,\n  EngagementTimeSeries,\n} from 'src/social-engagement-analytics/enagagemanet-analytics/interfaces/engagement-analytics.interface';\nimport { EngagementType } from 'src/social-engagement-analytics/enagagemanet-analytics/entities/engagement.entity';\n\n@Injectable()\nexport class AnomalyDetectionUtil {\n  // Threshold for determining if a deviation is significant enough to be an anomaly\n  private readonly ANOMALY_THRESHOLD = 2.0;\n\n  /**\n   * Detect anomalies in engagement time series data\n   */\n  detectAnomalies(timeSeries: EngagementTimeSeries[]): EngagementAnomaly[] {\n    const anomalies: EngagementAnomaly[] = [];\n\n    // Skip if not enough data points\n    if (timeSeries.length < 3) {\n      return anomalies;\n    }\n\n    // Get all engagement types present in the data\n    const engagementTypes = new Set<EngagementType>();\n    timeSeries.forEach((point) => {\n      point.engagements.forEach((engagement) => {\n        engagementTypes.add(engagement.type);\n      });\n    });\n\n    // For each engagement type, detect anomalies\n    engagementTypes.forEach((type) => {\n      // Extract counts for this engagement type\n      const typeCounts = timeSeries.map((point) => {\n        const engagement = point.engagements.find((e) => e.type === type);\n        return {\n          timestamp: point.timestamp,\n          count: engagement ? engagement.count : 0,\n        };\n      });\n\n      // Calculate moving average and standard deviation\n      const windowSize = 3; // Use 3 data points for the moving window\n\n      for (let i = windowSize; i < typeCounts.length; i++) {\n        const window = typeCounts.slice(i - windowSize, i);\n        const currentPoint = typeCounts[i];\n\n        // Calculate mean and standard deviation of the window\n        const mean =\n          window.reduce((sum, point) => sum + point.count, 0) / window.length;\n        const variance =\n          window.reduce(\n            (sum, point) => sum + Math.pow(point.count - mean, 2),\n            0,\n          ) / window.length;\n        const stdDev = Math.sqrt(variance);\n\n        // Calculate z-score (number of standard deviations from the mean)\n        const zScore = stdDev === 0 ? 0 : (currentPoint.count - mean) / stdDev;\n\n        // If z-score exceeds threshold, it's an anomaly\n        if (Math.abs(zScore) > this.ANOMALY_THRESHOLD) {\n          let severity: 'low' | 'medium' | 'high';\n          if (Math.abs(zScore) > this.ANOMALY_THRESHOLD * 2) {\n            severity = 'high';\n          } else if (Math.abs(zScore) > this.ANOMALY_THRESHOLD * 1.5) {\n            severity = 'medium';\n          } else {\n            severity = 'low';\n          }\n\n          anomalies.push({\n            timestamp: currentPoint.timestamp,\n            value: currentPoint.count,\n            expectedValue: mean,\n            deviation: currentPoint.count - mean,\n            severity,\n          });\n        }\n      }\n    });\n\n    return anomalies;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/database/migrations/create-social-engagement-tables.migration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/shared/enums/content-type.enum.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/shared/enums/engagement-type.enum.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/shared/interfaces/content-polymorph.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/shared/services/rate-limiter.service.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_key' is defined but never used.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_limit' is defined but never used.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_window' is defined but never used.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":12}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":16,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class RateLimiterService {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async checkLimit(\n    _key: string,\n    _limit: number,\n    _window: number,\n  ): Promise<boolean> {\n    // Placeholder implementation\n    return true;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async incrementCounter(key: string): Promise<number> {\n    // Placeholder implementation\n    return 1;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/shared/shared.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/dto/create-engagement.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/dto/engagement-response.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/entities/engagement-counter.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/entities/social-engagement.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/social-engagement.controller.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ApiBody' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ApiQuery' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":11}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/social-engagement/social-engagement.controller.ts\nimport {\n  Controller,\n  Post,\n  Get,\n  Delete,\n  Param,\n  Body,\n  UseGuards,\n  Query,\n  ParseIntPipe,\n  DefaultValuePipe,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport {\n  ApiBearerAuth,\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBody,\n  ApiQuery,\n} from '@nestjs/swagger';\nimport { SocialEngagementService } from './social-engagement.service';\nimport { CreateEngagementDto } from './dto/create-engagement.dto';\nimport { EngagementResponseDto } from './dto/engagement-response.dto';\nimport { JwtAuthGuard } from 'src/auth/guards/jwt-auth.guard';\n// import { CurrentUser } from 'src/auth/decorators/current-user.decorator';\n// import { User } from 'src/users/entities/user.entity';\nimport { ContentType } from '../shared/enums/content-type.enum';\n\n@ApiTags('social-engagement')\n@Controller('engagements')\nexport class SocialEngagementController {\n  constructor(private readonly service: SocialEngagementService) {}\n\n  @Post()\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth()\n  @ApiOperation({ summary: 'Create or toggle a like/dislike engagement' })\n  @ApiResponse({\n    status: HttpStatus.CREATED,\n    description: 'Engagement created or updated',\n    type: EngagementResponseDto,\n  })\n  async createEngagement(\n    // @CurrentUser() user: User,\n    @Body() dto: CreateEngagementDto,\n  ): Promise<EngagementResponseDto> {\n    // const userId = user.id;\n    const userId = 'mock-user-id'; // Mock user ID\n    return this.service.createEngagement(userId, dto);\n  }\n\n  @Delete(':id')\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth()\n  @HttpCode(HttpStatus.NO_CONTENT)\n  @ApiOperation({ summary: 'Remove an engagement' })\n  @ApiResponse({\n    status: HttpStatus.NO_CONTENT,\n    description: 'Engagement removed',\n  })\n  async removeEngagement(\n    // @CurrentUser() user: User,\n    @Param('id') id: string,\n  ): Promise<void> {\n    // const userId = user.id;\n    const userId = 'mock-user-id'; // Mock user ID\n    return this.service.removeEngagement(userId, id);\n  }\n\n  @Get('user/:contentId/:contentType')\n  @UseGuards(JwtAuthGuard)\n  @ApiBearerAuth()\n  @ApiOperation({\n    summary: 'Get current user engagement for a specific content',\n  })\n  @ApiResponse({\n    status: HttpStatus.OK,\n    description: 'User engagement',\n    type: EngagementResponseDto,\n  })\n  async getUserEngagement(\n    // @CurrentUser() user: User,\n    @Param('contentId') contentId: string,\n    @Param('contentType') contentType: ContentType,\n  ): Promise<EngagementResponseDto> {\n    // const userId = user.id;\n    const userId = 'mock-user-id'; // Mock user ID\n    return this.service.getUserEngagement(userId, contentId, contentType);\n  }\n\n  @Get('count/:contentId/:contentType')\n  @ApiOperation({ summary: 'Get engagement counts for content' })\n  @ApiResponse({\n    status: HttpStatus.OK,\n    description: 'Engagement counts',\n    schema: {\n      type: 'object',\n      properties: {\n        likes: { type: 'number' },\n        dislikes: { type: 'number' },\n      },\n    },\n  })\n  async getContentEngagementCounts(\n    @Param('contentId') contentId: string,\n    @Param('contentType') contentType: ContentType,\n  ): Promise<{ likes: number; dislikes: number }> {\n    return this.service.getContentEngagementCounts(contentId, contentType);\n  }\n\n  @Get(':contentId/:contentType')\n  @ApiOperation({ summary: 'Get all engagements for a specific content' })\n  @ApiResponse({\n    status: HttpStatus.OK,\n    description: 'Content engagements',\n    schema: {\n      type: 'object',\n      properties: {\n        engagements: {\n          type: 'array',\n          items: { $ref: '#/components/schemas/EngagementResponseDto' },\n        },\n        total: { type: 'number' },\n      },\n    },\n  })\n  async getContentEngagements(\n    @Param('contentId') contentId: string,\n    @Param('contentType') contentType: ContentType,\n    @Query('page', new DefaultValuePipe(1), ParseIntPipe) page: number,\n    @Query('limit', new DefaultValuePipe(10), ParseIntPipe) limit: number,\n  ): Promise<{ engagements: EngagementResponseDto[]; total: number }> {\n    return this.service.getContentEngagements(\n      contentId,\n      contentType,\n      page,\n      limit,\n    );\n  }\n\n  @Get(':contentType/:contentId/summary')\n  @ApiOperation({\n    summary: 'Get the current user-s engagement for a content item',\n  })\n  @ApiResponse({\n    status: HttpStatus.OK,\n    description: 'User engagement summary',\n    type: EngagementResponseDto,\n  })\n  async getUserEngagementSummary(\n    // @CurrentUser() user: User,\n    @Param('contentId') contentId: string,\n    @Param('contentType') contentType: ContentType,\n  ): Promise<EngagementResponseDto | null> {\n    // const userId = user.id;\n    const userId = 'mock-user-id'; // Mock user ID\n    return this.service.getUserEngagement(userId, contentId, contentType);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/social-engagement.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/social-engagement.repository.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/social-engagement.service.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/social-engagement-module/social-engagement/social-engagement.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/staking/entities/staking-history.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/starknet/providers/starknet-provider.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/starknet/starknet.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/starknet/starknet.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/starknet/starknet.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/stats/stats.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/stats/stats.middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/stats/stats.modules.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/stats/stats.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/tasks/signal.task.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/tasks/tasks.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/dto/create-template.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/dto/update-template.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/entities/template.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/templates.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/templates.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/templates/templates.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'createTemplateDto' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateTemplateDto' is defined but never used.","line":21,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/token/entities/token.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/token/token.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/token/token.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/token/token.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/dtos/preferences.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/entities/user.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/guards/startnet.auth.guard.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_error' is defined but never used.","line":62,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Injectable,\n  CanActivate,\n  ExecutionContext,\n  UnauthorizedException,\n} from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { User } from '../entities/user.entity';\nimport { verifyStarknetMessage } from '../utils/startnet';\n\n@Injectable()\nexport class StarknetAuthGuard implements CanActivate {\n  constructor(\n    @InjectRepository(User)\n    private userRepository: Repository<User>,\n  ) {}\n\n  async canActivate(context: ExecutionContext): Promise<boolean> {\n    const request = context.switchToHttp().getRequest();\n    const authHeader = request.headers.authorization;\n\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      throw new UnauthorizedException('Missing or invalid authorization token');\n    }\n\n    const token = authHeader.split(' ')[1];\n\n    try {\n      // Verify the Starknet token and extract wallet address\n      const { walletAddress, signature, message } = JSON.parse(\n        Buffer.from(token, 'base64').toString(),\n      );\n\n      // Verify the signature using Starknet wallet\n      const isValid = await verifyStarknetMessage(\n        walletAddress,\n        message,\n        signature,\n      );\n\n      if (!isValid) {\n        throw new UnauthorizedException('Invalid signature');\n      }\n\n      // Find user by wallet address\n      let user = await this.userRepository.findOne({\n        where: { walletAddress },\n      });\n\n      // Create user if not exists\n      if (!user) {\n        user = new User();\n        user.walletAddress = walletAddress;\n        user = await this.userRepository.save(user);\n      }\n\n      // Attach user to request object\n      request.user = user;\n\n      return true;\n    } catch (_error) {\n      throw new UnauthorizedException('Authentication failed');\n    }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/interface/user.interface.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/user.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/user.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/user.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/userController.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/userController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/users/utils/startnet.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/utils/contract-loader.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/utils/starknetUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/utils/winstonLogger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/voting/entities/voting-history.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/voting/vote.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/voting/voting.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/voting/voting.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/dto/create-web-hook.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/dto/update-web-hook.dto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/entities/web-hook.entity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/web-hook.controller.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/web-hook.module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/src/web-hook/web-hook.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/test/app.e2e-spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/test/rate-limit.e2e-spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mustang/Desktop/onchainsage/apps/backend/test/test.signal.gateway.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]